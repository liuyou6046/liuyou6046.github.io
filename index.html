<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="我的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="我的博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>我的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">我的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Accueil
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/12/LeetCode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuyoude">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/12/LeetCode/" itemprop="url">Non titré</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posté le</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-12T00:18:48+08:00">
                2017-09-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="LeetCode"><a href="#LeetCode" class="headerlink" title="LeetCode"></a>LeetCode</h2><h3 id="227-Basic-Calculator-2"><a href="#227-Basic-Calculator-2" class="headerlink" title="227.Basic Calculator 2"></a>227.Basic Calculator 2</h3><p>1.java</p>
<p>对于每一个数，都默认一个符号，比如：3+5/2，3的符号是+，5的符号是+，2的符号是/。符号优先级不同：乘除马上操作，得到结果保存；而加减不动。读取字符串，如果当前字符是数字，那么临时保存（注意数字可能是多位的，故需要num=num<em>10+s.charAt(i)-‘0’）。如果当前字符是+，则num入栈；如果当前字符是-，则num取负数入栈；如果当前字符是</em>，则取栈顶与该num相乘，入栈；如果当前字符是/，则取栈顶与num相除然后入栈。最后，对栈中元素求和，为最终结果。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">public int calculate(String s) &#123;  </div><div class="line">      int re = 0;  </div><div class="line">      Stack&lt;Integer&gt; st = new Stack&lt;&gt;();  </div><div class="line">      char sign = <span class="string">'+'</span>;  </div><div class="line">      int num = 0;  </div><div class="line">      <span class="keyword">for</span>(int i=0;i&lt;s.length();i++)&#123;  </div><div class="line">          char cur = s.charAt(i);  </div><div class="line">          <span class="keyword">if</span>(cur&gt;=<span class="string">'0'</span>&amp;&amp;cur&lt;=<span class="string">'9'</span>)&#123;  </div><div class="line">              num = num*10+(cur-<span class="string">'0'</span>);  </div><div class="line">          &#125;  </div><div class="line">          <span class="keyword">if</span>((cur!=<span class="string">' '</span>&amp;&amp;(cur&lt;<span class="string">'0'</span>||cur&gt;<span class="string">'9'</span>))||i==s.length()-1)&#123;  </div><div class="line">              <span class="keyword">if</span>(sign==<span class="string">'-'</span>)  </div><div class="line">                  st.push(-num);  </div><div class="line">              <span class="keyword">else</span> <span class="keyword">if</span>(sign==<span class="string">'+'</span>)  </div><div class="line">                  st.push(num);  </div><div class="line">              <span class="keyword">else</span> <span class="keyword">if</span>(sign==<span class="string">'*'</span>)  </div><div class="line">                  st.push(st.pop()*num);  </div><div class="line">              <span class="keyword">else</span> <span class="keyword">if</span>(sign==<span class="string">'/'</span>)  </div><div class="line">                  st.push(st.pop()/num);  </div><div class="line">              sign=cur;  </div><div class="line">              num=0;  </div><div class="line">          &#125;  </div><div class="line">      &#125;  </div><div class="line">      <span class="keyword">while</span>(!st.isEmpty())&#123;  </div><div class="line">          re += st.pop();  </div><div class="line">      &#125;  </div><div class="line">      <span class="built_in">return</span> re;  </div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>用两个stack来分别记录当前的结果和操作符(operator), 注意每一次统计当前的operand的时候，要看一下下一位的操作符。如果下一位是high operator(‘+’或’/‘), 就要先把当前的数和操作符都要先push回stack保留数据，如果当前stack不为空且已经有高位运算符在stack的顶部，就先计算一次重新计算当前的数字，再考虑之后的运算。有一种replace all multiple spaces with one space的方法，是s.replaceAll(“\s+”,””), \s 表示的是匹配任意的空白符，包括空格，制表符(Tab)，换行符，中文全角空格等。也可以用更简单的方法，replaceAll(“ +”, “”)。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">public double calculator(String s) &#123;</div><div class="line">    // delete multiple spaces</div><div class="line">    s = s.trim().replaceAll(<span class="string">" +"</span>, <span class="string">""</span>);</div><div class="line">    char[] arr = s.toCharArray();</div><div class="line">    Stack&lt;Double&gt; res = new Stack&lt;&gt;();</div><div class="line">    Stack&lt;Character&gt; operator = new Stack&lt;&gt;();</div><div class="line">    res.push(0.0);</div><div class="line">    operator.push(<span class="string">'+'</span>);</div><div class="line">    <span class="keyword">for</span>(int i = 0; i &lt; arr.length; i ++) &#123;</div><div class="line">        double val = 0;</div><div class="line">        int j = i;</div><div class="line">        <span class="keyword">while</span>(j &lt; arr.length &amp;&amp; Character.isDigit(arr[j])) &#123;</div><div class="line">            val *= 10;</div><div class="line">            val += arr[j] - <span class="string">'0'</span>;</div><div class="line">            j ++;</div><div class="line">        &#125;</div><div class="line">        //</div><div class="line">        <span class="keyword">if</span>(!operator.isEmpty() &amp;&amp; isHighOp(operator.peek())) &#123;</div><div class="line">            double temp = getValue(res.pop(), val,operator.pop());</div><div class="line">            val = temp;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(j &lt; arr.length &amp;&amp; isHighOp(arr[j])) &#123;</div><div class="line">            res.push(val);</div><div class="line">            operator.push(arr[j]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            double temp = getValue(res.pop(), val, operator.pop());</div><div class="line">            res.push(temp);</div><div class="line">            <span class="keyword">if</span>(j &lt; arr.length) operator.push(arr[j]);</div><div class="line">        &#125;</div><div class="line">        i = j;</div><div class="line">    &#125;</div><div class="line">    // notice the format;</div><div class="line">    DecimalFormal df = new DecimalFormat(<span class="string">"#.##"</span>);</div><div class="line">    <span class="built_in">return</span> Double.parseDouble(df.format(res.pop()));</div><div class="line">&#125;</div><div class="line"></div><div class="line">public boolean isHighOp(Character ch) &#123;</div><div class="line">    <span class="built_in">return</span> ch == <span class="string">'*'</span> || ch == <span class="string">'/'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public double getValue(double op1, double op2, Character ch) &#123;</div><div class="line">    <span class="keyword">if</span>(ch == <span class="string">'+'</span>) <span class="built_in">return</span> op1 + op2;</div><div class="line">    <span class="keyword">if</span>(ch == <span class="string">'-'</span>) <span class="built_in">return</span> op1 - op2;</div><div class="line">    <span class="keyword">if</span>(ch == <span class="string">'*'</span>) <span class="built_in">return</span> op1 * op2;</div><div class="line">    <span class="built_in">return</span> op1 / op2;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/11/HTML5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuyoude">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/11/HTML5/" itemprop="url">Non titré</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posté le</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-11T23:35:10+08:00">
                2017-09-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h2><h3 id="一-初探HTML5"><a href="#一-初探HTML5" class="headerlink" title="一.初探HTML5"></a>一.初探HTML5</h3><p>1.自闭合标签，将开始与结束标签合二为一，<code><br>2.使用虚元素<br>    a.用单个开始标签表示虚元素 <hr><br>    b.用空元素结构表示虚元素  <hr><br>3.布尔属性 <input disabled>可以阻止用户输入数据<br>4.自定义属性（扩展属性）以data-开头<br>5.html文档可以直接从磁盘载入浏览器，也可以从web服务器载入<br>6.外层结构：由两个元素确定，DOCTYPE和html。DOCTYPE让浏览器明白处理的HTML文档，布尔属性表达。<br>7.元数据：包含在head内<br>8.内容：放在body元素之中<br>9.HTML5元素分类:元数据元素、流元素、短语元素。元数据元素用来构建HTML文档的基本结构，流元素是短语元素的超集。<br>10.accesskey属性设定快捷键  <input accesskey="n"><br>11.contenteditable属性设置为true时用户可以编辑内容，为false时禁止编辑<br>12.dir属性用来规定文字的方向，ltr是从左到右，rtl是从右到左。<br>13.lang属性说明元素内容使用的语言，spellcheck属性进行拼写检查<br>14.HTML页面上的键盘焦点可以通过Tab键在各元素切换，用tabindex可以改变默认的转移顺序</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/02/MongoDB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuyoude">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/02/MongoDB/" itemprop="url">MongoDB</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posté le</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-02T02:52:50+08:00">
                2017-09-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="一：MongoDB简介"><a href="#一：MongoDB简介" class="headerlink" title="一：MongoDB简介"></a>一：MongoDB简介</h3><p>MongoDB是一个基于分布式文件存储的数据库，C++编写。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/02/ECMAScript6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuyoude">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/02/ECMAScript6/" itemprop="url">ECMAScript 6</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posté le</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-02T00:28:16+08:00">
                2017-09-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-let、const和block作用域"><a href="#1-let、const和block作用域" class="headerlink" title="1.let、const和block作用域"></a>1.let、const和block作用域</h3><p>let允许创建块级作用域，ES6推荐在函数中使用let定义变量，非var<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var a = 2;</div><div class="line">&#123;</div><div class="line">	<span class="built_in">let</span> a = 3;</div><div class="line">	console.log(a);</div><div class="line">&#125;</div><div class="line">console.log(a); //2</div></pre></td></tr></table></figure></p>
<p>同样在块级作用域有效的另一个变量声明方式是const。ES6中，const声明常量类似于指针，指向某个引用，也就是说这个‘常量’并非一成不变的。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	const ARR = [5,6];</div><div class="line">	ARR.push(7);</div><div class="line">	console.log(ARR); //[5,6,7]</div><div class="line">	ARR = 10;  //TypeError</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>有几点需要注意：<br>    let关键词声明的变量不具备变量提升（hoisting）特性<br>    let和const声明只在最靠近的一个块中（花括号内）有效<br>    当使用常量const声明时，使用大写变量<br>    const在声明时必须被赋值</p>
<h3 id="2-箭头函数（Arrow-Functions）"><a href="#2-箭头函数（Arrow-Functions）" class="headerlink" title="2.箭头函数（Arrow Functions）"></a>2.箭头函数（Arrow Functions）</h3><p>ES6中，箭头函数就是函数的一种简写形式，使用括号包裹参数，跟随一个=&gt;,紧接着是函数体<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var getPrice = <span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">	<span class="built_in">return</span> 4.55;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var getPrice = () =&gt;4.55;</div></pre></td></tr></table></figure></p>
<p>上面getPrice箭头函数采用了简洁函数体，不需要return语句，下面使用正常函数体<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> arr = [<span class="string">'apple'</span>,<span class="string">'banana'</span>,<span class="string">'orange'</span>];</div><div class="line"><span class="built_in">let</span> breakfast = arr.map(fruit =&gt; &#123;</div><div class="line">	<span class="built_in">return</span> fruit + <span class="string">'s'</span>;</div><div class="line">&#125;);</div><div class="line">console.log(breakfast); // apples bananas oranges</div></pre></td></tr></table></figure></p>
<p>当然，箭头函数不仅仅是让代码变得简洁，函数中this总是绑定指向对象自身<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">Person</span></span>() &#123;</div><div class="line">	this.age = 0;</div><div class="line">	setInterval(<span class="keyword">function</span> <span class="function"><span class="title">growUp</span></span>()&#123;</div><div class="line">		//在非严格模式下，growUp()函数的this指向window对象</div><div class="line">		this.age++;</div><div class="line">	&#125;,1000);</div><div class="line">&#125;</div><div class="line">var person = new Person();</div></pre></td></tr></table></figure></p>
<p>需要使用一个变量来保存this，然后在growUp函数中引用：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">Person</span></span>()&#123;</div><div class="line">	var self = this;</div><div class="line">	self.age = 0;</div><div class="line">	setInterval(<span class="keyword">function</span> <span class="function"><span class="title">growUp</span></span>()&#123;</div><div class="line">		self.age++;</div><div class="line">	&#125;,1000);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用箭头函数<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">Person</span></span>()&#123;</div><div class="line">  this.age = 0;</div><div class="line"> </div><div class="line">  setInterval(() =&gt; &#123;</div><div class="line">    // |this| 指向 person 对象</div><div class="line">    this.age++;</div><div class="line">  &#125;, 1000);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">var person = new Person();</div></pre></td></tr></table></figure></p>
<h3 id="3-函数参数默认值"><a href="#3-函数参数默认值" class="headerlink" title="3.函数参数默认值"></a>3.函数参数默认值</h3><p>ES6中允许你对函数设置默认值：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> getFinalPrice = (price,tax=0.7) =&gt; price + price*tax;</div><div class="line">getFinalPrice(500); //850</div></pre></td></tr></table></figure></p>
<h3 id="4-Spread-Rest操作符"><a href="#4-Spread-Rest操作符" class="headerlink" title="4.Spread/Rest操作符"></a>4.Spread/Rest操作符</h3><p>Spread/Rest操作符指的是…，具体是Spread还是Rest需要看上下文语境<br>当被用于迭代器时，它是一个Spread操作符<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> foo(x,y,z) &#123;</div><div class="line">	console.log(x,y,z);</div><div class="line">&#125;</div><div class="line"><span class="built_in">let</span> arr = [1,2,3];</div><div class="line">foo(...arr);  //[1,2,3,4,5]</div></pre></td></tr></table></figure></p>
<p>被用于函数传参时，是一个Rest操作符<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> foo(...args) &#123;</div><div class="line">	console.log(args);</div><div class="line">&#125;</div><div class="line">foo(1,2,3,4,5);  //[1,2,3,4,5]</div><div class="line"></div><div class="line"><span class="comment">### 5.对象词法扩展</span></div><div class="line">ES6允许声明在对象字面量时使用简写语法，来初始化属性变量和函数的定义方法，并且允许在对象属性中进行计算操作：</div><div class="line">``` bash</div><div class="line"><span class="keyword">function</span> getCar(make,model,value)&#123;</div><div class="line">	<span class="built_in">return</span>&#123;</div><div class="line">		//简写变量</div><div class="line">		make,  //等同于make：make</div><div class="line">		model, //等同于model：model</div><div class="line">		value, //等同于value：value</div><div class="line">		//属性可以使用表达式计算值</div><div class="line">		[<span class="string">'make'</span> +make]: <span class="literal">true</span>,</div><div class="line">		//忽略‘<span class="keyword">function</span>’关键词简写对象函数</div><div class="line">		<span class="function"><span class="title">depreciate</span></span>()&#123;</div><div class="line">			this.value -= 2500;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;</div><div class="line"><span class="built_in">let</span> car = getCar(<span class="string">'Barret'</span>,<span class="string">'Lee'</span>,40000);</div></pre></td></tr></table></figure></p>
<h3 id="6-二进制和八进制字面量"><a href="#6-二进制和八进制字面量" class="headerlink" title="6.二进制和八进制字面量"></a>6.二进制和八进制字面量</h3><p>ES6支持二进制和八进制的字面量，通过在数字前面添加0o或者0O即可将其转换为二进制：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> oValue = 0o10;</div><div class="line">console.log(oValue); //8</div><div class="line"><span class="built_in">let</span> bValue = 0b10; //二进制使用‘0b’或者‘0B’</div><div class="line">console.log(bValue); //2</div></pre></td></tr></table></figure></p>
<h3 id="7-对象和数组解构"><a href="#7-对象和数组解构" class="headerlink" title="7.对象和数组解构"></a>7.对象和数组解构</h3><p>解构可以避免在对象赋值时产生中间变量：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">foo</span></span>()&#123;</div><div class="line">	<span class="built_in">return</span> [1,2,3];</div><div class="line">&#125;</div><div class="line"><span class="built_in">let</span> arr = foo(); //[1,2,3]</div><div class="line"><span class="built_in">let</span> [a,b,c] = foo();</div><div class="line">console.log(a,b,c); //1 2 3</div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">bar</span></span>()&#123;</div><div class="line">	<span class="built_in">return</span>&#123;</div><div class="line">		x: 4,</div><div class="line">		y: 5,</div><div class="line">		z: 6</div><div class="line">	&#125;;</div><div class="line">&#125;</div><div class="line"><span class="built_in">let</span> &#123;x: x,y: y,z: z&#125; = bar();</div><div class="line">console.log(x,y,z); //4 5 6</div></pre></td></tr></table></figure></p>
<h3 id="8-对象超类"><a href="#8-对象超类" class="headerlink" title="8.对象超类"></a>8.对象超类</h3><p>ES6允许在对象中使用super方法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var parent = &#123;</div><div class="line">	<span class="function"><span class="title">foo</span></span>()&#123;</div><div class="line">		console.log(<span class="string">"Hello from the Parent"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">var child = &#123;</div><div class="line">	<span class="function"><span class="title">foo</span></span>()&#123;</div><div class="line">		super.foo();</div><div class="line">		console.log(<span class="string">"Hello from the Child"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">Object.setPrototypeOf(child,parent);</div><div class="line">child.foo();	//Hello from the Parent</div><div class="line">				//Hello from the Child</div></pre></td></tr></table></figure></p>
<h3 id="9-模板语法和分隔符"><a href="#9-模板语法和分隔符" class="headerlink" title="9.模板语法和分隔符"></a>9.模板语法和分隔符</h3><p>ES6中有一种十分简洁的方法组装一堆字符串和变量<br>    ${…}用来渲染一个变量<br>    ‘作为分隔符<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> user = <span class="string">'Barret'</span>;</div><div class="line">console.log(<span class="string">'Hi $&#123;user&#125;!'</span>); //Hi Barret!</div></pre></td></tr></table></figure></p>
<h3 id="10-for…of-VS-for…in"><a href="#10-for…of-VS-for…in" class="headerlink" title="10.for…of VS for…in"></a>10.for…of VS for…in</h3><p>for…of用于遍历一个迭代器，如数组：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> nicknames = [<span class="string">'di'</span>,<span class="string">'boo'</span>,<span class="string">'punkeye'</span>];</div><div class="line">nicknames.size = 3;</div><div class="line"><span class="keyword">for</span>(<span class="built_in">let</span> nickname of nicknames) &#123;</div><div class="line">	console.log(nickname);</div><div class="line">&#125;</div><div class="line">//结果：di,boo,punkeye</div></pre></td></tr></table></figure></p>
<p>for…in用来遍历对象中的属性<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> nicknames = [<span class="string">'di'</span>,<span class="string">'boo'</span>,<span class="string">'punkeye'</span>];</div><div class="line">nicknames.size = 3;</div><div class="line"><span class="keyword">for</span>(<span class="built_in">let</span> nickname <span class="keyword">in</span> nicknames)&#123;</div><div class="line">	console.log(nickname);</div><div class="line">&#125;</div><div class="line">Result:0,1,2,size</div></pre></td></tr></table></figure></p>
<h3 id="11-Map和WeakMap"><a href="#11-Map和WeakMap" class="headerlink" title="11.Map和WeakMap"></a>11.Map和WeakMap</h3><p>ES6中两种新的数据结构集：Map和WeakMap。事实上每个对象都可以看作是一个Map。<br>一个对象由多个key-val对构成，在Map中，任何类型都可以作为对象的key，如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var myMap = new Map();</div><div class="line">var keyString = <span class="string">'a string'</span>,</div><div class="line">	keyObj = &#123;&#125;,</div><div class="line">	keyFunc = <span class="function"><span class="title">function</span></span>()&#123;&#125;;</div><div class="line">//设置</div><div class="line">myMap.set(keyString,<span class="string">"value与'a string'关联"</span>);</div><div class="line">myMap.set(keyObj,<span class="string">"value与keyObj关联"</span>);</div><div class="line">myMap.set(keyFunc,<span class="string">"value与keyFunc关联"</span>);</div><div class="line">myMap.size; //3</div><div class="line">//获取值</div><div class="line">myMap.get(keyString);	//<span class="string">"value与'a string'关联"</span></div><div class="line">myMap.get(keyObj);		//<span class="string">"value与keyObj关联"</span></div><div class="line">myMap.get(keyFunc);		//<span class="string">"value与keyFunc关联"</span></div></pre></td></tr></table></figure></p>
<h3 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h3><p>WeakMap就是一个Map，只不过它的所有key都是弱引用，就是说WeakMap中的东西垃圾回收时不考虑，使用它不用担心内存泄漏问题。<br>WeakMap的所有key必须是对象。它只有四个方法delete(key),has(key),get(key)和set(key,val):<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> w = new WeakMap();</div><div class="line">w.set(<span class="string">'a'</span>,<span class="string">'b'</span>);</div><div class="line">// Uncaught TypeError: Invalid value used as weak map key</div><div class="line">var o1 = &#123;&#125;,</div><div class="line">	o2 = <span class="function"><span class="title">function</span></span>()&#123;&#125;,</div><div class="line">	o3 = window;</div><div class="line">w.set(o1,37);</div><div class="line">w.set(o2,<span class="string">"azerty"</span>);</div><div class="line">w.set(o3,undefined);</div><div class="line">w.get(o3);	//undefined,because that is the <span class="built_in">set</span> value</div><div class="line">w.has(o1); //<span class="literal">true</span></div><div class="line">w.delete(o1);</div><div class="line">w.has(o1); //<span class="literal">false</span></div></pre></td></tr></table></figure></p>
<h3 id="12-Set和WeakSet"><a href="#12-Set和WeakSet" class="headerlink" title="12.Set和WeakSet"></a>12.Set和WeakSet</h3><p>Set对象是一组不重复的值，重复的值被忽略，值类型可以是原始类型和引用类型：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">let</span> mySet = new Set([1,1,2,2,3,3]);</div><div class="line">mySet.size;	//3</div><div class="line">mySet.has(1); //<span class="literal">true</span></div><div class="line">mySet.add(<span class="string">'strings'</span>);</div><div class="line">mySet.add(&#123;a: 1,b: 2&#125;);</div></pre></td></tr></table></figure></p>
<p>可以通过forEach和for…of来遍历Set对象<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">mySet.forEach((item) =&gt; &#123;</div><div class="line">	console.log(item);</div><div class="line">	//1</div><div class="line">	//2</div><div class="line">	//3</div><div class="line">	// <span class="string">'strings'</span></div><div class="line">	// Object &#123;a：1,b: 2&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="built_in">let</span> value of mySet) &#123;</div><div class="line">	console.log(value);</div><div class="line">	//1</div><div class="line">	//2</div><div class="line">	//3</div><div class="line">	// <span class="string">'strings'</span></div><div class="line">	// Object &#123;a: 1,b: 2&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Set同样有delete()和clear()方法。</p>
<h3 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h3><p>类似于WeakMap，WeakSet对象可以在一个集合中保存对象的弱引用，在WeakSet中的对象只允许出现一次:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var ws = new WeakSet();</div><div class="line">var obj = &#123;&#125;;</div><div class="line">var foo = &#123;&#125;;</div><div class="line">ws.add(window);</div><div class="line">ws.add(obj);</div><div class="line">ws.has(window);	//<span class="literal">true</span></div><div class="line">ws.has(foo);	//<span class="literal">false</span>,foo没有添加成功</div><div class="line">ws.delete(window);	//从结合中删除window对象</div><div class="line">ws.has(window);		//<span class="literal">false</span>,window对象已经被删除</div></pre></td></tr></table></figure></p>
<h3 id="13-类"><a href="#13-类" class="headerlink" title="13.类"></a>13.类</h3><p>ES6中有class语法。值得注意的是这里的class不是新的对象继承模型，它只是原型链的语法糖表现形式。<br>函数中使用static关键词定义构造函数的方法和属性：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">class Task&#123;</div><div class="line">	<span class="function"><span class="title">constructor</span></span>()&#123;</div><div class="line">		console.log(<span class="string">"task instantiated!"</span>)</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="title">showId</span></span>()&#123;</div><div class="line">		console.log(23);</div><div class="line">	&#125;</div><div class="line">	static <span class="function"><span class="title">loadAll</span></span>()&#123;</div><div class="line">		console.log(<span class="string">"Loading all tasks.."</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">console.log(typeof Task);	//<span class="keyword">function</span></div><div class="line"><span class="built_in">let</span> task = new Task();	//<span class="string">"task instantiated!"</span></div><div class="line">task.showId();	//23</div><div class="line">Task.loadAll();	//<span class="string">"Loading all tasks.."</span></div></pre></td></tr></table></figure></p>
<p>类中的继承和超集：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">class Car &#123;</div><div class="line">	<span class="function"><span class="title">constructor</span></span>()&#123;</div><div class="line">		console.log(<span class="string">"Creating a new car"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">class Porsche exends Car &#123;</div><div class="line">	<span class="function"><span class="title">constructor</span></span>()&#123;</div><div class="line">		super();</div><div class="line">		console.log(<span class="string">"Creating Porsche"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">let</span> c = new Porsche();</div><div class="line">//Creating a new car</div><div class="line">//Creating Porsche</div><div class="line">extends允许一个子类继承父类，需要注意的是，子类的constructor函数中需要执行super()函数。也可以在子类方法中调用父类的方法，如super.parentMethodName()。</div><div class="line">几点需要注意：</div><div class="line">	类的声明不会提升(hoisting),如果要使用某个class，需在使用之前定义</div><div class="line">	在类中定义函数不需要使用<span class="keyword">function</span>关键词</div><div class="line">	</div><div class="line"><span class="comment">### 14.Symbol</span></div><div class="line">Symbol是一种新的数据类型，值是唯一的不可变的。ES6中提出symbol的目的是为了生成一个唯一的标识符，不过访问不到这个标识符：</div><div class="line">``` bash</div><div class="line">var sym = Symbol(<span class="string">"some optional description"</span>);</div><div class="line">console.log(typeof sym);	//symbol</div></pre></td></tr></table></figure></p>
<p>这里的Symbol前面不能使用new操作符，如果它被用作一个对象的属性，那这个属性是不可枚举的：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var o = &#123;</div><div class="line">	val: 10,</div><div class="line">	[Symbol(<span class="string">"random"</span>)]:<span class="string">"I'm a symbol"</span>,</div><div class="line">&#125;;</div><div class="line">console.log(Object.getOwnPropertyNames(o)); //val</div></pre></td></tr></table></figure></p>
<p>要获取对象symbol属性，需要使用Object.getOwnPropertySymbols(o)。</p>
<h3 id="15-迭代器"><a href="#15-迭代器" class="headerlink" title="15.迭代器"></a>15.迭代器</h3><p>迭代器允许每次访问数据集合的一个元素，当指针指向数据集合最后一个元素时迭代器退出。它提供了next()函数来遍历一个序列，返回一个包含done和value属性的对象。<br>ES6中可以通过Symbol.iterator给对象设置默认的遍历器，执行它的@@iterator方法便可以返回一个用于获取值的迭代器。<br>数组默认就是一个迭代器：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var arr = [11,12,13];</div><div class="line">var itr = arr[Symbol.iterator]();</div><div class="line">itr.next();	//&#123;value: 11,<span class="keyword">done</span>: <span class="literal">false</span>&#125;</div><div class="line">itr.next();	//&#123;value: 12,<span class="keyword">done</span>: <span class="literal">false</span>&#125;</div><div class="line">itr.next();	//&#123;value: 13,<span class="keyword">done</span>: <span class="literal">false</span>&#125;</div><div class="line">itr.next();	//&#123;value: undefined,<span class="keyword">done</span>:<span class="literal">true</span>&#125;</div></pre></td></tr></table></figure></p>
<p>可以通过<a href="">Symbol.iterator</a>自定义一个对象的迭代器。</p>
<h3 id="16-Generators"><a href="#16-Generators" class="headerlink" title="16.Generators"></a>16.Generators</h3><p>Generator函数是ES6的新特性，允许一个函数返回的可遍历对象生成多个值。<br>使用中会看到*语法和新的关键词yield：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> *<span class="function"><span class="title">infiniteNumbers</span></span>()&#123;</div><div class="line">	var n = 1;</div><div class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)&#123;</div><div class="line">		yield n++;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">var numbers = infiniteNumbers();	//<span class="built_in">return</span> an iterable object</div><div class="line">numbers.next();	//&#123;value: 1,<span class="keyword">done</span>: <span class="literal">false</span>&#125;</div><div class="line">numbers.next();	//&#123;value: 2,<span class="keyword">done</span>: fasle&#125;</div><div class="line">numbers.next(); //&#123;value: 3,<span class="keyword">done</span>: <span class="literal">false</span>&#125;</div></pre></td></tr></table></figure></p>
<p>每次执行yield时，返回的值变为迭代器的下一个值。</p>
<h3 id="17-Promises"><a href="#17-Promises" class="headerlink" title="17.Promises"></a>17.Promises</h3><p>ES6对Promise有了原生的支持，一个Promise是一个等待被异步执行的对象，执行完成后，其状态会变成resolved或者rejected。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var p = new Promise(<span class="keyword">function</span>(resolve,reject) &#123;</div><div class="line">	<span class="keyword">if</span>(/*condition*/) &#123;</div><div class="line">		//fulfilled successfully</div><div class="line">		resolve(/*value*/);</div><div class="line">	&#125;<span class="keyword">else</span>&#123;</div><div class="line">		//error,rejected</div><div class="line">		reject(/*reason */);</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line">每个Promise都有一个.<span class="keyword">then</span>方法，这个方法接受两个参数，第一个是处理resolved状态的回调，一个是处理rejected状态的回调：</div><div class="line">``` bash</div><div class="line">p.then((val) =&gt; console.log(<span class="string">"Promise Resolved"</span>,val),</div><div class="line">		(err) =&gt; console.log(<span class="string">"Promise Rejected"</span>,err));</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/28/reactJS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuyoude">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/28/reactJS/" itemprop="url">React</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posté le</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-28T21:08:08+08:00">
                2017-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考<a href="http://www.ruanyifeng.com/blog/2015/03/react.html" target="_blank" rel="external">阮一峰博客</a></p>
<h3 id="一、HTML模板"><a href="#一、HTML模板" class="headerlink" title="一、HTML模板"></a>一、HTML模板</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">  &lt;head&gt;</div><div class="line">   &lt;script src=<span class="string">"../build/react.js"</span>&gt;&lt;/script&gt;</div><div class="line">   &lt;script src=<span class="string">"../build/react-dom.js"</span>&gt;&lt;/script&gt;</div><div class="line">    &lt;script src=<span class="string">"../build/browser.min.js"</span>&gt;&lt;/script&gt;</div><div class="line">  &lt;/head&gt;</div><div class="line">  &lt;body&gt;</div><div class="line">    &lt;div id=<span class="string">"example"</span>&gt;&lt;/div&gt;</div><div class="line">    &lt;script <span class="built_in">type</span>=<span class="string">"text/babel"</span>&gt;</div><div class="line">      // ** Our code goes here! **</div><div class="line">    &lt;/script&gt;</div><div class="line">  &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>最后一个script的type属性为text/babel，这是react独有的JSX语法。<br>其中，react.js是核心库，react-dom.js提供与DOM相关的功能，Browser.js作用是将JSX语法转换为JS语法，实际上线的时候将它放到服务器完成</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ babel src --out-dir build</div></pre></td></tr></table></figure>
<p>将src子目录的js文件进行语法转换，转码后放在build子目录</p>
<h3 id="二、ReactDOM-render"><a href="#二、ReactDOM-render" class="headerlink" title="二、ReactDOM.render()"></a>二、ReactDOM.render()</h3><p>ReactDOM.render是react的基本方法，用于将模板转换为HTMML语言，并插入指定 的DOM节点</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ReactDOM.render(</div><div class="line">  &lt;h1&gt;Hello, world!&lt;/h1&gt;,</div><div class="line">  document.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<h3 id="三、JSX语法"><a href="#三、JSX语法" class="headerlink" title="三、JSX语法"></a>三、JSX语法</h3><p>JSX语法允许HTML和JS混写<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">var names = [<span class="string">'Alice'</span>, <span class="string">'Emily'</span>, <span class="string">'Kate'</span>];</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  &lt;div&gt;</div><div class="line">  &#123;</div><div class="line">    names.map(<span class="keyword">function</span> (name) &#123;</div><div class="line">      <span class="built_in">return</span> &lt;div&gt;Hello, &#123;name&#125;!&lt;/div&gt;</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">  &lt;/div&gt;,</div><div class="line">  document.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>遇到HTML标签（以&lt;开头）用HTML规则解析，遇到代码块（以｛开头）就用JS规则解析<br>JSX允许直接在模版插入JS变量，下面代码的arr变量就是一个数组<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var arr = [</div><div class="line">  &lt;h1&gt;Hello world!&lt;/h1&gt;,</div><div class="line">  &lt;h2&gt;React is awesome&lt;/h2&gt;,</div><div class="line">];</div><div class="line">ReactDOM.render(</div><div class="line">  &lt;div&gt;&#123;arr&#125;&lt;/div&gt;,</div><div class="line">  document.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<h3 id="四、组件"><a href="#四、组件" class="headerlink" title="四、组件"></a>四、组件</h3><p>React允许将代码封装成组件，然后像插入普通HTML标签一样插入组件，React.creatClass方法就用于生成一个组件类<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var HelloMessage = React.creatClass(&#123;</div><div class="line">	render: <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">		<span class="built_in">return</span> &lt;h1&gt;Hello &#123;this.props.name&#125;&lt;/h1&gt;</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render&#123;</div><div class="line">	&lt;HelloMessage name=<span class="string">"John"</span>/&gt;,</div><div class="line">	document.getElementById(<span class="string">'example'</span>)</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>变量HelloMessage就是一个组件类，所有的组件类都必须有自己的render方法，组件类的第一个字母必须大写。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var HelloMessage = React.creatClass(&#123;</div><div class="line">	render: <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">		<span class="built_in">return</span> &lt;h1&gt;</div><div class="line">			Hello&#123;this.props.name&#125;</div><div class="line">		&lt;/h1&gt;&lt;p&gt;</div><div class="line">			some text</div><div class="line">		&lt;/p&gt;;</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>上面代码会报错，因为HelloMessage组件包含了两个顶层标签：h1和p。组件的属性可以在组件类的this.props对象上获取，添加组件属性时class属性需要写成className,for写成htmlFor。</p>
<h3 id="五、this-props-children"><a href="#五、this-props-children" class="headerlink" title="五、this.props.children"></a>五、this.props.children</h3><p>this.props对象的属性和组件的属性一一对应，但是this.props.children属性例外，它表示组件的所有子节点<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">var NotesList = React.createClass(&#123;</div><div class="line">	render: <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">		<span class="built_in">return</span>(</div><div class="line">			&lt;ol&gt;</div><div class="line">			&#123;</div><div class="line">				React.Children.map(this.props.children,<span class="keyword">function</span>(child)&#123;</div><div class="line">					<span class="built_in">return</span> &lt;li&gt;&#123;child&#125;&lt;/li&gt;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			&lt;/ol&gt;</div><div class="line">		);</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">	&lt;NotesList&gt;</div><div class="line">		&lt;span&gt;hello&lt;/span&gt;</div><div class="line">		&lt;span&gt;world&lt;/span&gt;</div><div class="line">	&lt;/NotesList&gt;,</div><div class="line">	document.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>上面代码NoteList组件有两个span子节点。都可以通过this.props.children读取<br>this.props.children的值有三种可能：如果当前组件没有子节点，它就是undefined；如果有一个子节点，数据类型就是object；如果有多个子节点，数据类型就是array。<br>React提供一个工具方法React.Children来处理this.props.children,可以用React.Children.map来遍历子节点，而不用担心数据类型是undefind还是object。</p>
<h3 id="六、PropTypes"><a href="#六、PropTypes" class="headerlink" title="六、PropTypes"></a>六、PropTypes</h3><p>组件的属性可以接受任意值，字符串、对象、函数等等都可以，组件类的PropTypes属性，就是用来验证组件实例的属性是否符合要求。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var MyTitle = React.creatClass(&#123;</div><div class="line">	propTypes: &#123;</div><div class="line">		title: React.propTypes.string.isRequired,</div><div class="line">	&#125;,</div><div class="line">	</div><div class="line">	render: <span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">		<span class="built_in">return</span> &lt;h1&gt;&#123;this.props.title&#125; &lt;/h1&gt;;</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line">ReactDOM.render(</div><div class="line">	&lt;MyTitle title=&#123;data&#125;/&gt;,</div><div class="line">	document.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>上面的Mytitle组件有一个title属性，PropTypes告诉React，title属性是必须的，而且它的值必须是字符串。此外，getDefaultProps方法可以用来设置组件属性的默认值。</p>
<h3 id="七、获取真实的DOM节点"><a href="#七、获取真实的DOM节点" class="headerlink" title="七、获取真实的DOM节点"></a>七、获取真实的DOM节点</h3><p>组件并不是真实的DOM节点，而是存在于内存之中的一种数据结构，叫做虚拟DOM。只有当它插入文档以后，才会变成真实的DOM。根据React的设计，所有DOM的变动，都先在虚拟DOM发生，然后再反映在真实DOM的节点，这种算法叫做DOM diff，可以极大提高网页的性能表现。<br>有时需要从组件获取真实的DOM节点，这时要用到ref属性。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">var MyComponent = React.createClass(&#123;</div><div class="line">  handleClick: <span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">    this.refs.myTextInput.focus();</div><div class="line">  &#125;,</div><div class="line">  render: <span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">    <span class="built_in">return</span> (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;input <span class="built_in">type</span>=<span class="string">"text"</span> ref=<span class="string">"myTextInput"</span> /&gt;</div><div class="line">        &lt;input <span class="built_in">type</span>=<span class="string">"button"</span> value=<span class="string">"Focus the text input"</span> onClick=&#123;this.handleClick&#125; /&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  &lt;MyComponent /&gt;,</div><div class="line">  document.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>上面代码中，组件MyComponent的子节点有一个文本输入框，用于获取用户的输入，这时必须获取真实的DOM节点，虚拟DOM拿不到用户输入，文本输入框必须有ref属性，然后this.ref.[refName]就会返回真实的DOM节点。<br>由于this.refs.[refName]属性获取真实的DOM，所以必须等虚拟DOM插入文档以后，才能使用。上面通过指定Click事件的回调函数，确保真实DOM发生Click事件后，才读取属性。</p>
<h3 id="八、this-state"><a href="#八、this-state" class="headerlink" title="八、this.state"></a>八、this.state</h3><p>React将组件看成是状态机，开始有一个初始状态，然后用户互动导致状态变化，从而触发重新渲染UI。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">var LikeButton = React.createClass(&#123;</div><div class="line">	getInitialState: <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">		<span class="built_in">return</span> &#123;liked: <span class="literal">false</span>&#125;;</div><div class="line">	&#125;,</div><div class="line">	handleClick: <span class="keyword">function</span>(event) &#123;</div><div class="line">		this.setState(&#123;liked: !this.state.liked&#125;);</div><div class="line">	&#125;,</div><div class="line">	render:<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">		var text = this.state.liked ? <span class="string">'liked'</span> : <span class="string">'haven\'</span>t liked<span class="string">';</span></div><div class="line"><span class="string">		return(</span></div><div class="line"><span class="string">			&lt;p onClick=$&#123;this.handleClick&#125;&gt;</span></div><div class="line"><span class="string">				You &#123;text&#125; this.Click to toggle.</span></div><div class="line"><span class="string">			&lt;/p&gt;</span></div><div class="line"><span class="string">		);</span></div><div class="line"><span class="string">	&#125;</span></div><div class="line"><span class="string">&#125;);</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">ReactDOM.render(</span></div><div class="line"><span class="string">	&lt;LikeButton/&gt;,</span></div><div class="line"><span class="string">	document.getElementById('</span>example<span class="string">')</span></div><div class="line"><span class="string">);</span></div></pre></td></tr></table></figure></p>
<p>上面代码是一个LikeButton组件，它的getInitialState方法用于定义初始状态，也就是一个对象，这个对象可以通过this.state属性读取。当用户点击组件导致状态变化，this.setState方法就修改状态值，每次修改以后，自动调用this.render方法再次渲染组件。<br>this.props表示一旦定义就不再改变的特性，而this.state是会随着用户互动而产生变化的特性。</p>
<h3 id="九、表单"><a href="#九、表单" class="headerlink" title="九、表单"></a>九、表单</h3><p>在表单填入的内容属于与组件的互动，不能用this.props读取。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var Input = React.creatClass(&#123;</div><div class="line">	getInitialState: <span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">		<span class="built_in">return</span>&#123;value: <span class="string">'Hello!'</span>&#125;;</div><div class="line">	&#125;,</div><div class="line">	handleChange: <span class="keyword">function</span>(event)&#123;</div><div class="line">		this.setState(&#123;value: event.target.value&#125;);</div><div class="line">	&#125;,</div><div class="line">	render:<span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">		var value = this.state.value;</div><div class="line">		<span class="built_in">return</span>(</div><div class="line">			&lt;div&gt;</div><div class="line">				&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> value=&#123;value&#125; onChange=&#123;this.handleChange&#125; /&gt;</div><div class="line">				&lt;p&gt;&#123;value&#125;&lt;/p&gt;</div><div class="line">			 &lt;/div&gt;</div><div class="line">		);</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(&lt;Input/&gt;,document.body);</div></pre></td></tr></table></figure></p>
<p>上面的文本输入框不能用this.props.value读取，需定义onChange事件的回调函数，通过event.target.value读取用户输入的值。textarea、select、radio都属于这种情况。</p>
<h3 id="十、组件的生命周期"><a href="#十、组件的生命周期" class="headerlink" title="十、组件的生命周期"></a>十、组件的生命周期</h3><p>组件的生命周期分为三个状态<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Mounting: 已插入真实DOM</div><div class="line">Updating: 正在被重新渲染</div><div class="line">Unmounting： 已移出真实DOM</div></pre></td></tr></table></figure></p>
<p>React为每个状态都提供了两种处理函数，will函数在进入状态之前调用，did函数在进入状态之后调用<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">componentWillMount()</div><div class="line">componentDidMount()</div><div class="line">componentWillUpdata(object nextProps, object nextState)</div><div class="line">componentDidUpdata(object prevProps, object prevState)</div><div class="line">componentWillUnmount()</div></pre></td></tr></table></figure></p>
<p>React还提供两种特殊状态的处理函数<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">componentWillReceiveProps(object nextProps):已加载组件收到新的参数时调用</div><div class="line">shouldComponentUpdate(object nextProps, OBJECT nextState):组件判断是否冲刺呢渲染时调用</div></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">var Hello = React.createClass(&#123;</div><div class="line">  getInitialState: <span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">    <span class="built_in">return</span> &#123;</div><div class="line">      opacity: 1.0</div><div class="line">    &#125;;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  componentDidMount: <span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">    this.timer = setInterval(<span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">      var opacity = this.state.opacity;</div><div class="line">      opacity -= .05;</div><div class="line">      <span class="keyword">if</span> (opacity &lt; 0.1) &#123;</div><div class="line">        opacity = 1.0;</div><div class="line">      &#125;</div><div class="line">      this.setState(&#123;</div><div class="line">        opacity: opacity</div><div class="line">      &#125;);</div><div class="line">    &#125;.<span class="built_in">bind</span>(this), 100);</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  render: <span class="function"><span class="title">function</span></span> () &#123;</div><div class="line">    <span class="built_in">return</span> (</div><div class="line">      &lt;div style=&#123;&#123;opacity: this.state.opacity&#125;&#125;&gt;</div><div class="line">        Hello &#123;this.props.name&#125;</div><div class="line">      &lt;/div&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  &lt;Hello name=<span class="string">"world"</span>/&gt;,</div><div class="line">  document.body</div><div class="line">);</div></pre></td></tr></table></figure>
<p>上面代码在hello组件加载以后，通过componentDidMount方法设置一个定时器，每隔100毫秒重新设置组件的透明度引发重新渲染<br>组件的style属性不能写成<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">style=<span class="string">"opacity:&#123;this.state.opacity&#125;;"</span></div></pre></td></tr></table></figure></p>
<p>React组件样式是一个对象，第一重大括号表示JS语法，第二层表示样式对象。</p>
<h3 id="十一、Ajax"><a href="#十一、Ajax" class="headerlink" title="十一、Ajax"></a>十一、Ajax</h3><p>组件的数据来源，通常是通过Ajax请求从服务器获取，可以使用componentDidMount方法设置Ajax请求，等到请求成功，再用this.setState方法重新渲染UI<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">var UserGist = React.createClass(&#123;</div><div class="line">  getInitialState: <span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">    <span class="built_in">return</span> &#123;</div><div class="line">      username: <span class="string">''</span>,</div><div class="line">      lastGistUrl: <span class="string">''</span></div><div class="line">    &#125;;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  componentDidMount: <span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">    $.get(this.props.source, <span class="keyword">function</span>(result) &#123;</div><div class="line">      var lastGist = result[0];</div><div class="line">      <span class="keyword">if</span> (this.isMounted()) &#123;</div><div class="line">        this.setState(&#123;</div><div class="line">          username: lastGist.owner.login,</div><div class="line">          lastGistUrl: lastGist.html_url</div><div class="line">        &#125;);</div><div class="line">      &#125;</div><div class="line">    &#125;.<span class="built_in">bind</span>(this));</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  render: <span class="function"><span class="title">function</span></span>() &#123;</div><div class="line">    <span class="built_in">return</span> (</div><div class="line">      &lt;div&gt;</div><div class="line">        &#123;this.state.username&#125;<span class="string">'s last gist is</span></div><div class="line"><span class="string">        &lt;a href=&#123;this.state.lastGistUrl&#125;&gt;here&lt;/a&gt;.</span></div><div class="line"><span class="string">      &lt;/div&gt;</span></div><div class="line"><span class="string">    );</span></div><div class="line"><span class="string">  &#125;</span></div><div class="line"><span class="string">&#125;);</span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">ReactDOM.render(</span></div><div class="line"><span class="string">  &lt;UserGist source="https://api.github.com/users/octocat/gists" /&gt;,</span></div><div class="line"><span class="string">  document.body</span></div><div class="line"><span class="string">);</span></div></pre></td></tr></table></figure></p>
<p>上面代码使用jquery完成Ajax请求<br>可以把Promise对象传入组件。从github的API抓取数据，然后将Promise对象作为属性传给Repolist组件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ReactDOM.render(</div><div class="line">  &lt;RepoList</div><div class="line">    promise=&#123;$.getJSON(<span class="string">'https://api.github.com/search/repositories?q=javascript&amp;sort=stars'</span>)&#125;</div><div class="line">  /&gt;,</div><div class="line">  document.body</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>如果Promise对象正在抓取数据（pending状态），组件显示”正在加载”；如果Promise对象报错（rejected状态），组件显示报错信息；如果Promise对象抓取数据成功（fulfilled状态），组件显示获取的数据。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/21/nodeJs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuyoude">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/21/nodeJs/" itemprop="url">NodeJs</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posté le</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-21T23:20:46+08:00">
                2017-08-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>现在学习nodeJs</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/15/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuyoude">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/15/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posté le</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-08-15T12:32:31+08:00">
                2017-08-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="liuyoude" />
          <p class="site-author-name" itemprop="name">liuyoude</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">articles</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liuyoude</span>

  
</div>


  <div class="powered-by">
    Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
  </div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">
    Thème &mdash;
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Muse
    </a>
  </div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
